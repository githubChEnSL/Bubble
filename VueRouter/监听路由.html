<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>监听路由</title>
  <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
  <!-- 路由 -->
  <script src="https://unpkg.com/vue-router/dist/vue-router.js"></script>
  <style>
    .component-enter,
    .component-leave-to {
      opacity: 0;
      transform: translateX(50px);
    }
    /* v-enter-active : 入场动画的时间段 */
    /* v-leave-active : 离场动画的时间段 */
    .component-enter-active,
    .component-leave-active {
      transition: all 0.5s ease;
    }
  </style>
</head>
<body>
  <div id="app">
    <!-- router-link:控制组件的切换 -->
    <!-- 如果不想被渲染成a标签就添加tag -->
    <router-link to="/login" tag='button'>登录</router-link>
    <router-link to="/register" tag='button'>注册</router-link>

    <transition name="component" mode="out-in">
      <!-- 这是个坑，专门做占位符，当路由进行切换时，在路由中匹配到对应的组件就会展示在这个坑里 -->
      <router-view></router-view>
    </transition>
  </div>
  <script>
    // 登录组件
    var login={
      template:'<p>我是登录组件</p>'
    }
    // 注册组件
   var register={
      template:'<p>我是注册组件</p>'
    }

    //当引入了Vue-router之后，在window全对象中就有了一个VueRouter构造函数
    // vue的路由就是控制页面跳转
     let routerObj=new VueRouter({
      routes:[
        // 访问根路径时
        {path:'/',redirect:'login'},//redirect：路由重定向（和后端的请求重定向时两个概念），将访问#时会重定向到login
        //routers中定义看路由的规则；对象中有两个属性：path->路由的url、component->路由跳转到的组件
        { path:'/login',component:login},
        { path:'/register',component:register}
      ]
     })

     var vue=new Vue({
       el:'#app',
       data:{
       },
      // 绑定路由 
       router : routerObj,
       watch:{
        //  监听路由（有拦截器的作用）
        // 应用场景：监听路由的url是否为登录url,如果不是，检验用户是否登录，未登录的情况下跳转到登陆页面
         '$route.fullPath':function(newVal,oldVal){
          console.log('用户路由跳转url为：',newVal)
         }
       }
     })
  </script>
</body>
</html>